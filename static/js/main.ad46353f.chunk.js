(this.webpackJsonptevian=this.webpackJsonptevian||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var a,r,c,s,o,i,u,l,d,b,j,p,h,O=n(0),x=n(22),f=n.n(x),m=(n(69),n(107)),v=n(8),g=n(10),y=n(15),w=n(17),S=n(14),k=Object(S.a)(a||(a=Object(w.a)(["\n*{\n    margin: 0;\n    padding: 0;\n    font-family: 'Urbanist', sans-serif;\n}\n"]))),E=S.b.div(r||(r=Object(w.a)(["\n  max-width: 500px;\n  display: flex;\n  flex-direction: column;\n  margin: 20% auto;\n"]))),C=S.b.div(c||(c=Object(w.a)(["\n  width: ","px;\n  position: relative;\n  margin: 20px auto;\n  & > img {\n    width: 100%;\n  }\n"])),(function(e){return e.width})),A=S.b.div(s||(s=Object(w.a)(["\n  font-size: 15px;\n  margin: 10px auto;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  & > label {\n    font-size: 25px;\n    color: #0069d9;\n    margin-bottom: -10px;\n  }\n\n  & > label:hover {\n    color: #002a57;\n  }\n  & > input {\n    display: none;\n  }\n"]))),L=S.b.div(o||(o=Object(w.a)(["\n  position: absolute;\n  width: ","px;\n  height: ","px;\n  top: ","px;\n  left: ","px;\n  z-index: 10;\n  border-style: solid;\n  border-color: ",";\n  border-width: ","; \n  border-radius: 6px;\n\n  &:hover{\n      border: 3px solid #0069D9;\n  }\n"])),(function(e){return e.box.width/e.proportion}),(function(e){return e.box.height/e.proportion}),(function(e){return e.box.y/e.proportion}),(function(e){return e.box.x/e.proportion}),(function(e){return e.selected?"red":"blue"}),(function(e){return e.selected?"3px":"1px"})),z=S.b.form(i||(i=Object(w.a)(["\nwidth: 100%;\nmax-width: 600px;\nbackground: #343A40;\npadding: 20px;\nmargin: 20px 0;\n& > input{\n    width: 100%;\n    padding: 5px;\n    margin-bottom: 20px;\n    font-size: 18px;\n}\n& > label{\n    font-size: 20px;\n    color: #fff;\n    margin: 0;\n}\n"]))),F=S.b.button(u||(u=Object(w.a)(["\nborder: none;\nmargin: 10px auto;\nmin-width: 100px;\nheight: 40px;\nborder-radius: 5px;\nbackground: #0069D9;\ncolor: #fff;\n&:hover{\n    background: #002a57;\n}\n"]))),G=S.b.div(l||(l=Object(w.a)(["\nwidth: 100%;\ntext-align: center;\n"]))),I=S.b.div(d||(d=Object(w.a)(["\ndisplay: flex;\nflex-direction: column;\nalign-items: center;\npadding: 10px;\n"]))),N=S.b.form(b||(b=Object(w.a)(["\nfont-size: 25px;\n& > span{\n    margin-top: -15px;\n    margin-bottom: -5px;\n    display: block;\n    font-family: 'Roboto';\n}\n& > label{\n    font-size: 15px;\n    text-decoration: underline;\n}\n& > input{\n    width: 100%;\n}\n"]))),P=S.b.div(j||(j=Object(w.a)(["\ndisplay: flex;\nflex-wrap: wrap;\nwidth: 100%;\nmax-width: 600px;\nbackground: #F8F8FF;\ncolor: #000;\npadding: 20px;\nmargin-bottom: 20px;\n& >  ","{\n    flex: 1;\n    margin: -20px;\n    margin-right: 20px;\n    margin-bottom: 0px;\n    min-width: 100px;\n    background: #F8F8FF;\n};\n\n& > "," {\n    flex: 2;\n    min-width: 300px;\n}\nbox-shadow: 0.25px 1.5px 5px #999999;\n"])),C,N),B=(S.b.button(p||(p=Object(w.a)(["\nbackground: none;\nborder: none;\ncolor: #fff;\n&:hover{\n    color: #0069D9;\n}\n"]))),S.b.div(h||(h=Object(w.a)(["\ntext-align: right;\nwidth: 100%;\n& span:nth-child(1):hover{\n    color: #0069d9;\n};\n& span:nth-child(2):hover{\n    color: #FF3A20;\n}\n& span{\n    color: #000;\n};\n\n& span{\n    margin-left: 10px;\n}\n"])))),U=n(7),R=n(108),J=n(111),T=n(105),D=n(106),M=n(9),_=n.n(M),H=n(13),W=n(12),Y=n.n(W),q=n(30),K={emailError:"",passError:"",loader:!1,user:localStorage.getItem("user")||null},Q=Object(q.b)({name:"auth",initialState:K,reducers:{setEmailError:function(e,t){e.emailError=t.payload},setPassError:function(e,t){e.passError=t.payload},setLoader:function(e,t){e.loader=t.payload},setUser:function(e,t){e.user=t.payload,localStorage.setItem("user",t.payload)},logoutUser:function(e){e.user=null}}}),V=Q.actions,X=Q.reducer;function Z(){return(Z=Object(H.a)(_.a.mark((function e(t,n,a,r,c){var s,o,i,u;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="https://backend.facecloud.tevian.ru/api/v1/".concat("LOGIN"===r?"login":"users"),o={email:n,password:a},"REGISTER"===r&&(o.billing_type="demo"),e.prev=3,e.next=6,Y.a.post(s,o);case 6:(i=e.sent).data.data.access_token&&(u=JSON.stringify({email:n,token:i.data.data.access_token}),localStorage.setItem("user",u),t(V.setUser(u)),c.push("/")),"REGISTER"===r&&c.push("/login"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),e.t0.response.data.error?t(V.setEmailError(e.t0.response.data.error.email[0])):e.t0.response.data.message&&t(V.setPassError(e.t0.response.data.message));case 14:return e.prev=14,t(V.setLoader(!1)),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[3,11,14,17]])})))).apply(this,arguments)}function $(e,t,n,a,r,c){e.preventDefault(),t(V.setEmailError("")),t(V.setPassError("")),function(e,t,n){var a=!0;return t.trim()&&t.includes("@")||(e(V.setEmailError("Enter a valid Email!")),a=!1),n.trim()||(e(V.setPassError("Enter a password!")),a=!1),n.trim().length<8&&(e(V.setPassError("Password must be at least 8 characters!")),a=!1),a}(t,n,a)&&(t(V.setLoader(!0)),function(e,t,n,a,r){Z.apply(this,arguments)}(t,n,a,r,c))}var ee=n(1),te=function(){var e=Object(O.useState)(""),t=Object(v.a)(e,2),n=t[0],a=t[1],r=Object(O.useState)(""),c=Object(v.a)(r,2),s=c[0],o=c[1],i=Object(U.c)((function(e){return e.auth.emailError})),u=Object(U.c)((function(e){return e.auth.passError})),l=Object(U.c)((function(e){return e.auth.loader})),d=Object(U.b)(),b=Object(g.f)();return Object(ee.jsxs)(E,{children:[Object(ee.jsxs)(R.a,{onSubmit:function(e){return $(e,d,n,s,"REGISTER",b)},children:[Object(ee.jsxs)(R.a.Group,{controlId:"formBasicEmail",children:[Object(ee.jsx)("h1",{children:"Sign Up"}),Object(ee.jsx)(R.a.Label,{children:"Email address"}),Object(ee.jsx)(R.a.Control,{type:"email",placeholder:"Enter email",value:n,name:"email",onChange:function(e){return a(e.target.value)}})]}),i&&Object(ee.jsx)(J.a,{variant:"danger",children:i}),Object(ee.jsxs)(R.a.Group,{controlId:"formBasicPassword",children:[Object(ee.jsx)(R.a.Label,{children:"Password"}),Object(ee.jsx)(R.a.Control,{type:"password",placeholder:"Password",value:s,name:"password",onChange:function(e){return o(e.target.value)}})]}),u&&Object(ee.jsx)(J.a,{variant:"danger",children:u}),!l&&Object(ee.jsx)(T.a,{variant:"primary",type:"submit",children:"Sign up"}),l&&Object(ee.jsx)(D.a,{animation:"border",variant:"primary"})]}),Object(ee.jsx)("br",{}),Object(ee.jsxs)("span",{children:["Already have an account? ",Object(ee.jsx)(y.b,{to:"/login",children:"Log in"})]})]})},ne=function(){var e=Object(O.useState)(""),t=Object(v.a)(e,2),n=t[0],a=t[1],r=Object(O.useState)(""),c=Object(v.a)(r,2),s=c[0],o=c[1],i=Object(U.c)((function(e){return e.auth.emailError})),u=Object(U.c)((function(e){return e.auth.passError})),l=Object(U.c)((function(e){return e.auth.loader})),d=Object(U.b)(),b=Object(g.f)();return Object(ee.jsxs)(E,{children:[Object(ee.jsxs)(R.a,{onSubmit:function(e){return $(e,d,n,s,"LOGIN",b)},children:[Object(ee.jsx)("h1",{children:"Log In"}),Object(ee.jsxs)(R.a.Group,{controlId:"formBasicEmail",children:[Object(ee.jsx)(R.a.Label,{children:"Email address"}),Object(ee.jsx)(R.a.Control,{type:"email",placeholder:"Enter email",value:n,name:"email",onChange:function(e){return a(e.target.value)}})]}),i&&Object(ee.jsx)(J.a,{variant:"danger",children:i}),Object(ee.jsxs)(R.a.Group,{controlId:"formBasicPassword",children:[Object(ee.jsx)(R.a.Label,{children:"Password"}),Object(ee.jsx)(R.a.Control,{type:"password",placeholder:"Password",value:s,name:"password",onChange:function(e){return o(e.target.value)}})]}),u&&Object(ee.jsx)(J.a,{variant:"danger",children:u}),!l&&Object(ee.jsx)(T.a,{variant:"primary",type:"submit",children:"Submit"}),l&&Object(ee.jsx)(D.a,{animation:"border",variant:"primary"})]}),Object(ee.jsx)("br",{}),Object(ee.jsxs)("span",{children:["Don't have an account? ",Object(ee.jsx)(y.b,{to:"/register",children:"Sign Up"})]})]})},ae=n(110),re=n(109),ce=function(){var e=JSON.parse(Object(U.c)((function(e){return e.auth.user}))),t=Object(U.b)(),n=Object(g.f)();return Object(ee.jsxs)(ae.a,{bg:"light",expand:"lg",children:[Object(ee.jsx)(ae.a.Brand,{href:"#",children:"Tevian"}),Object(ee.jsx)(ae.a.Toggle,{"aria-controls":"navbarScroll"}),Object(ee.jsxs)(ae.a.Collapse,{id:"navbarScroll",children:[Object(ee.jsxs)(re.a,{className:"mr-auto my-2 my-lg-0",style:{maxHeight:"30vh",alignItems:"center"},navbarScroll:!0,children:[Object(ee.jsx)(re.a,{children:Object(ee.jsx)(y.b,{exact:!0,to:"/",children:"Home"})}),"\xa0\xa0",Object(ee.jsx)(re.a,{children:Object(ee.jsx)(y.b,{to:"/persons",children:"Persons"})})]}),Object(ee.jsxs)(re.a,{style:{maxHeight:"30vh",alignItems:"center"},children:[e&&Object(ee.jsx)(re.a.Link,{children:e.email}),e&&Object(ee.jsx)(F,{onClick:function(e){return function(e,t){localStorage.removeItem("user"),e(V.logoutUser()),t.push("/login")}(t,n)},children:"Log out"})]})]})]})},se=function(e){var t=e.label,n=e.edit,a=e.type,r=void 0===a?"text":a,c=e.data,s=void 0===c?"":c,o=Object(O.useState)(s),i=Object(v.a)(o,2),u=i[0],l=i[1];return Object(O.useEffect)((function(){l(s)}),[s]),Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsxs)("label",{htmlFor:t,children:[t,":"]}),!n&&Object(ee.jsx)("span",{id:t,children:s}),n&&Object(ee.jsx)("input",{name:t,type:r,value:u,onChange:function(e){return l(e.target.value)}})]})},oe=function(e){var t=e.label,n=e.edit,a=(e.type,Object(O.useState)(e.data)),r=Object(v.a)(a,2),c=r[0],s=r[1];return Object(O.useEffect)((function(){s(e.data)}),[e.data]),Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsxs)("label",{htmlFor:t,children:[t,":"]}),Object(ee.jsx)("br",{}),!n&&Object(ee.jsxs)("div",{children:["male"===c?Object(ee.jsx)("span",{children:"\ud83d\udc66"}):Object(ee.jsx)("span",{children:"\ud83d\udc67"}),Object(ee.jsx)("span",{id:t,children:c})]}),n&&Object(ee.jsxs)("select",{style:{fontSize:"20px",fontWeight:"700"},onChange:function(e){return s(e.target.value)},id:t,children:[Object(ee.jsx)("option",{selected:"male"===c,value:"male",children:"\ud83d\udc66 Male"}),Object(ee.jsx)("option",{selected:"female"===c,value:"female",children:"\ud83d\udc67 Female"})]}),Object(ee.jsx)("br",{})]})},ie=function(e){var t=e.image,n=Object(U.b)(),a=JSON.parse(Object(U.c)((function(e){return e.auth.user}))),r=Object(U.c)((function(e){return e.person.person})),c=Object(U.c)((function(e){return e.auth.loader})),s=Object(O.useState)(""),o=Object(v.a)(s,2),i=o[0],u=o[1],l=Object(O.useState)(""),d=Object(v.a)(l,2),b=d[0],j=d[1],p=r.demographics,h=r.bbox,x="https://backend.facecloud.tevian.ru/api/v1/";Object(O.useEffect)((function(){j(""),u("")}),[p]);var f=function(){var e=Object(H.a)(_.a.mark((function e(t){var r,c,s,o,i,l,d,b;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),u(""),j(""),n(V.setLoader(!0)),r=t.target,c=r.Name,s=r.Midname,o=r.Surname,i=r.Age,l=r.Gender,d={data:{Name:c.value,Midname:s.value,Surname:o.value,Age:i.value,Gender:l.value},database_id:a.db},e.prev=6,e.next=9,Y.a.post("".concat(x,"persons"),d,{headers:{Authorization:"Bearer ".concat(a.token)}});case 9:b=e.sent,m(b.data.data.id),u("Successfully Saved!"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),j("Couldn't upload the person!");case 17:return e.prev=17,n(V.setLoader(!1)),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[6,14,17,20]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(H.a)(_.a.mark((function e(n){var r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[h.x,h.y,h.width,h.height],e.prev=1,e.next=4,Y.a.post("".concat(x,"photos?face=").concat(r,"&person_id=").concat(n),t,{headers:{Authorization:"Bearer ".concat(a.token),"Content-Type":"image/jpeg"}});case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),j("Couldn't upload the person's photo!");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(ee.jsxs)(z,{onSubmit:function(e){return f(e)},children:[Object(ee.jsx)(se,{label:"Name",data:p.name,edit:!0}),Object(ee.jsx)(se,{label:"Midname",data:p.midname,edit:!0}),Object(ee.jsx)(se,{label:"Surname",data:p.surname,edit:!0}),Object(ee.jsx)(se,{label:"Age",data:p.age.mean,edit:!0,type:"number"}),Object(ee.jsx)(oe,{label:"Gender",data:p.gender,edit:!0}),!c&&Object(ee.jsx)(F,{type:"submit",children:"Save"}),c&&Object(ee.jsx)(D.a,{animation:"border",variant:"primary"}),i&&Object(ee.jsx)(J.a,{variant:"success",children:i}),b&&Object(ee.jsx)(J.a,{variant:"danger",children:b})]})},ue=n(40),le=n(33),de=n(34),be=function(e){var t=e.image;return Object(ee.jsxs)(A,{children:[Object(ee.jsxs)("label",{htmlFor:"upload",children:[!t&&Object(ee.jsx)(le.a,{icon:de.b}),t&&Object(ee.jsx)(le.a,{icon:de.a})]}),Object(ee.jsxs)("span",{children:[t?"Change the":"Add an"," image"]}),Object(ee.jsx)("input",Object(ue.a)({type:"file",id:"upload"},e))]})},je=Object(q.b)({name:"person",initialState:{person:null},reducers:{setPerson:function(e,t){e.person=t.payload}}}),pe=je.actions,he=je.reducer,Oe=function(e){var t=Object(U.b)(),n=Object(O.useState)(null),a=Object(v.a)(n,2),r=a[0],c=a[1];return Object(ee.jsxs)(C,{width:500,children:[Object(ee.jsx)("img",Object(ue.a)({},e)),e.faces?e.faces.map((function(n,a){return Object(ee.jsx)(L,{box:n.bbox,proportion:e.proportion,selected:r===a,onClick:function(e){return function(e,n){c(e),t(pe.setPerson(n))}(a,n)}},"person"+a)})):null]})},xe=function(){var e=JSON.parse(Object(U.c)((function(e){return e.auth.user}))),t=Object(U.c)((function(e){return e.auth.loader})),n=Object(U.c)((function(e){return e.person.person})),a=Object(g.f)(),r=Object(O.useState)(null),c=Object(v.a)(r,2),s=c[0],o=c[1],i=Object(O.useState)(null),u=Object(v.a)(i,2),l=u[0],d=u[1],b=Object(O.useState)(null),j=Object(v.a)(b,2),p=j[0],h=j[1],x=Object(O.useState)(""),f=Object(v.a)(x,2),m=f[0],y=f[1],w=Object(U.b)(),S="https://backend.facecloud.tevian.ru/api/v1/",k=function(){var t=Object(H.a)(_.a.mark((function t(){var n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w(V.setLoader(!0)),t.prev=1,t.next=4,Y.a.post("".concat(S,"detect?demographics=true"),s,{headers:{Authorization:"Bearer ".concat(e.token),"Content-Type":"image/jpeg"}});case 4:n=t.sent,h(n.data.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),y("Couldn't recognize any face!");case 11:return t.prev=11,w(V.setLoader(!1)),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=Object(H.a)(_.a.mark((function t(){var n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Y.a.get("".concat(S,"databases?page=0&per_page=5"),{headers:{accept:"application/json",Authorization:"Bearer ".concat(e.token)}});case 3:(n=t.sent).data.data[0]?(e.db=n.data.data[0].id,w(V.setUser(JSON.stringify(e)))):C(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),y("Getting database error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),C=function(){var t=Object(H.a)(_.a.mark((function t(){var n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Y.a.post("".concat(S,"databases"),{},{headers:{Authorization:"Bearer "+e.token,accept:"application/json","Content-Type":"application/json"}});case 3:n=t.sent,e.db=n.data.data.id,w(V.setUser(JSON.stringify(e))),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),y("Getting database error!");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return Object(O.useEffect)((function(){e?E():a.push("/login")}),[]),Object(O.useEffect)((function(){h(null)}),[s]),Object(ee.jsxs)(I,{children:[p&&Object(ee.jsx)(G,{children:"Click a face to see the person's parameters."}),Object(ee.jsx)(Oe,{src:s?URL.createObjectURL(s):null,faces:p,proportion:l}),s&&!t&&Object(ee.jsx)(F,{onClick:k,children:"Detect Faces!"}),t&&Object(ee.jsx)(D.a,{animation:"border",variant:"primary"}),!t&&Object(ee.jsx)(be,{onChange:function(e){return function(e){o(e);var t=new Image;t.src=URL.createObjectURL(e),t.onload=function(){var e=t.naturalWidth;d(e/500)}}(e.target.files[0])},image:s}),s&&n&&Object(ee.jsx)(ie,{image:s}),m&&Object(ee.jsx)(J.a,{variant:"danger",children:m})]})},fe=function(e){var t=JSON.parse(Object(U.c)((function(e){return e.auth.user}))),n=Object(O.useState)(!1),a=Object(v.a)(n,2),r=a[0],c=a[1],s=Object(O.useState)(null),o=Object(v.a)(s,2),i=o[0],u=o[1],l=Object(O.useState)(!1),d=Object(v.a)(l,2),b=d[0],j=d[1],p=Object(O.useState)(""),h=Object(v.a)(p,2),x=h[0],f=h[1],m=e.person,g=m.Name,y=m.Midname,w=m.Surname,S=m.Age,k=m.Gender,E="https://backend.facecloud.tevian.ru/api/v1/",A=function(){var n=Object(H.a)(_.a.mark((function n(){var a;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c(!0),n.prev=1,n.next=4,Y.a.get("".concat(E,"persons/").concat(e.id,"/photos"),{headers:{Authorization:"Bearer ".concat(t.token)}});case 4:return a=n.sent,n.next=7,Y.a.get("".concat(E,"photos/").concat(a.data.data[0].id,"/image/face?width=0&height=0"),{headers:{Authorization:"Bearer ".concat(t.token),accept:"image/jpeg"}});case 7:n.sent,u(a.data.data[0].id),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),f("Error loading the photo!");case 14:return n.prev=14,c(!1),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[1,11,14,17]])})));return function(){return n.apply(this,arguments)}}(),L=function(){var n=Object(H.a)(_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c(!0),n.prev=1,n.next=4,Y.a.delete("".concat(E,"persons/").concat(e.id),{headers:{Authorization:"Bearer ".concat(t.token)}});case 4:n.sent,e.getPersons(),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),f("Error during deleting occured!");case 11:return n.prev=11,c(!1),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[1,8,11,14]])})));return function(){return n.apply(this,arguments)}}(),z=function(){var n=Object(H.a)(_.a.mark((function n(a){var r,s,o,i,u,l,d;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),r=a.target,s=r.Name,o=r.Midname,i=r.Surname,u=r.Age,l=r.Gender,d={data:{Name:s.value,Midname:o.value,Surname:i.value,Age:u.value,Gender:l.value}},c(!0),n.prev=4,n.next=7,Y.a.post("".concat(E,"persons/").concat(e.id),d,{headers:{Authorization:"Bearer ".concat(t.token),accept:"application/json","Content-Type":"application/json"}});case 7:n.sent,n.next=13;break;case 10:n.prev=10,n.t0=n.catch(4),f("Cannot get the person!");case 13:return n.prev=13,j(!1),c(!1),n.finish(13);case 17:case"end":return n.stop()}}),n,null,[[4,10,13,17]])})));return function(e){return n.apply(this,arguments)}}();return Object(O.useEffect)((function(){A()}),[]),Object(ee.jsxs)(P,{children:[Object(ee.jsx)(C,{width:150,children:i?Object(ee.jsx)("img",{src:"".concat(E,"photos/").concat(i,"/image/face?width=0&height=0")}):null}),Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsxs)(N,{onSubmit:function(e){return z(e)},children:[Object(ee.jsx)(se,{label:"Name",data:g,edit:b}),Object(ee.jsx)(se,{label:"Midname",data:y,edit:b}),Object(ee.jsx)(se,{label:"Surname",data:w,edit:b}),Object(ee.jsx)(se,{label:"Age",data:S,edit:b,type:"number"}),Object(ee.jsx)(oe,{label:"Gender",data:k,edit:b}),b&&!r&&Object(ee.jsx)(F,{type:"submit",children:"Save"}),r&&Object(ee.jsx)(D.a,{animation:"border",variant:"primary"})]}),!b&&Object(ee.jsxs)(B,{children:[Object(ee.jsx)("span",{children:Object(ee.jsx)(le.a,{icon:de.a,onClick:function(e){return j(!0)}})}),Object(ee.jsx)("span",{children:Object(ee.jsx)(le.a,{icon:de.c,onClick:L})})]})]}),x&&Object(ee.jsx)(J.a,{variant:"danger",children:x})]})},me=function(){var e=JSON.parse(Object(U.c)((function(e){return e.auth.user}))),t=(Object(U.c)((function(e){return e.auth.loader})),Object(g.f)()),n=Object(O.useState)(!1),a=Object(v.a)(n,2),r=a[0],c=a[1],s=Object(O.useState)([]),o=Object(v.a)(s,2),i=o[0],u=o[1],l=Object(O.useState)(""),d=Object(v.a)(l,2),b=d[0],j=d[1],p=function(){var t=Object(H.a)(_.a.mark((function t(){var n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0),"https://backend.facecloud.tevian.ru/api/v1/",t.prev=2,t.next=5,Y.a.get("".concat("https://backend.facecloud.tevian.ru/api/v1/","databases/").concat(e.db,"/persons"),{headers:{Authorization:"Bearer ".concat(e.token)}});case 5:n=t.sent,u(n.data.data),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),j("Error getting persons!");case 12:return t.prev=12,c(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,9,12,15]])})));return function(){return t.apply(this,arguments)}}();return Object(O.useEffect)((function(){e?p():t.push("/login")}),[]),Object(ee.jsxs)(I,{children:[i&&i.map((function(e){return Object(ee.jsx)(fe,{person:e.data,id:e.id,getPersons:p},e.id)})),i.length<1&&!r&&Object(ee.jsxs)("h1",{children:["You haven't created any person yet!",Object(ee.jsx)("br",{}),"Create it ",Object(ee.jsx)(y.b,{exact:!0,to:"/",children:"here"})]}),r&&Object(ee.jsx)(D.a,{animation:"border",variant:"primary"}),b&&Object(ee.jsx)(J.a,{variant:"danger",children:b})]})};var ve=function(){return Object(ee.jsxs)(m.a,{children:[Object(ee.jsx)(ce,{}),Object(ee.jsxs)(g.c,{children:[Object(ee.jsx)(g.a,{path:"/register",component:te}),Object(ee.jsx)(g.a,{path:"/login",component:ne}),Object(ee.jsx)(g.a,{path:"/persons",component:me}),Object(ee.jsx)(g.a,{exact:!0,path:"/",component:xe})]})]})},ge=Object(q.a)({reducer:{auth:X,person:he}});n(102);f.a.render(Object(ee.jsxs)(y.a,{children:[Object(ee.jsx)(k,{}),Object(ee.jsx)(U.a,{store:ge,children:Object(ee.jsx)(ve,{})})]}),document.getElementById("root"))},69:function(e,t,n){}},[[103,1,2]]]);
//# sourceMappingURL=main.ad46353f.chunk.js.map